<h1> My Profile Page </h1>
<br>
<div class="row">
  <div class="col-md-8">
    <h3> My Itineraries </h3>
    <% @user.itineraries.each do |itinerary| %>
      <li><h3><%= link_to itinerary.title, itinerary_path(itinerary) %></h3></li>
    <% end %>
    </ul>
    <br>
    
     <h4>My Friends List</h4>
        <ul>
            <% @user.friends.each do |friend| %>
              <%= link_to (image_tag friend.avatar.url(:medium), :class => "profile-icon"), user_path(friend) %>
              <%= link_to friend.name, user_path(friend) %> 
                <%= link_to "Remove Friend", friendship_path(:id => friend), :method => :delete, class: "btn btn-default" %>
            </li>
          <% end %>
        </ul>
    <br><br>

      <h4>Friend Requests</h4>
        <ul>
            <% @user.requested_friendships.each do |request| %>
            <li>
              <%= request.name %> 
              <%= link_to "Accept", friendship_path(:id => request), :method => "put" %> 
              <%= link_to "Decline", friendship_path(:id => request), :method => :delete %>
            </li>
          <% end %>
        </ul>
        <% if current_user.pending_friends.count > 0 %>
        <u>Pending Friends</u>
        <ul>
          <% current_user.pending_friends.each do |friend| %>
            <li>
              <%= image_tag friend.avatar.url(:medium), :class => "profile-icon" %>
              Friend request to <%= friend.name %> sent!
            </li>
          <% end %>
        </ul>
        <% end %>
  </div>
  <div class="col-md-4">
    <h2><u><%= link_to @user.name, user_path(@user) %></u></h2>
    <%= link_to (image_tag @user.avatar.url(:medium)), user_path(@user) %><br>
    <u><h4> Add/Change a profile picture! </h4></u>
    <%= form_for @user,  :html => { :multipart => true } do |form| %>
      <% if @user.errors.any? %>
        <div id="error_explanation">
          <h2><%= pluralize(@user.errors.count, "error") %> prohibited this itinerary from being saved:</h2>
            <ul>
           <% @user.errors.full_messages.each do |message| %>
             <li><%= message %></li>
           <% end %>
           </ul>
       </div>
       <% end %>
        <%= form.file_field :avatar %>
         <div class = "actions"><br>
            <%= form.submit "Update Profile", class: "btn btn-primary" %>
        </div>
    <% end %>
          <%= create_itinerary_conditional %>
  </div>
</div>
